//問題
 /*
「燃料キャッチゲーム」を完成させよう！

// 課題内容 //

・この課題では、マウス操作・当たり判定　を使って、
　「燃料をキャッチして燃料残量を維持するゲーム」を作成します。

・画面上部から落下してくる “燃料” を、マウスで動かす円に当ててキャッチしましょう。
　燃料を取ると燃料が回復しますが、時間とともに減っていきます。
　燃料が0になるとゲームオーバーです。

・タブレットの教科書を調べてもOKです。
・ChatGPTなどAIを利用しない。（AIの扱いを測るテストではないので)

// ゲームの仕様 //

　<< 項目 >>	<< 内容 >>
・画面サイズ	横 960 × 縦 640（固定）
・マウスの円	半径30の円（初期位置は画面中央）
・燃料の円		半径20の円（画面上部のランダム位置から落下）
・操作方法		マウスを動かして円を操作
・燃料の減少	1フレームごとに燃料を1ずつ減少
・燃料キャッチ	燃料に当たると +20 回復し、燃料の円は上部に再配置
・燃料の上限	最大200まで（200を超えない）
・ゲームオーバー	燃料が0以下になると終了。「GAME OVER」を表示


// 実装のヒント //

・乱数初期化
　(unsigned)time(NULL) を引数にして 乱数の初期化 を記述しましょう。

・変数の定義
　- マウスの円（x, y, 半径r1）を int型 で定義します。初期位置は画面中央。
　- 燃料の円（x, y, 半径r2）を int型 で定義します。初期位置は画面上部のランダム位置。
　- 燃料の残量（fuel）を int型 で定義し、初期値を 100 に設定します。

・マウス座標の取得
　DXライブラリの関数を使い、マウスの現在位置を取得します。

・燃料の落下処理
　毎フレームごとに燃料の y座標を +5 します。
　画面下まで到達したら、上部のランダム位置に戻します。

・当たり判定
　マウスの円と燃料の円の距離を求めます。
　距離 d が燃料と自身の互いの半径 (r1 + r2) 以下であれば「接触」と判定します。
  距離は √((x1 - x2)2乗 + (y1 - y2)2乗) で求められ、教科書では sqrt() を利用した方法で紹介されていました
　当たったら：
　- 燃料の変数に +20
　- 燃料の円を上部のランダム位置に再配置

・燃料の処理
　- 毎フレーム fuel -= 1
　- 燃料の変数 が 200 を超えたら 200 に戻す
	- 燃料の変数 が 0 以下になったらループを抜けて終了（ゲームオーバー）

・描画処理
　- マウスの円を描画（Draw系のDXライブラリ関数を使用）
　- 燃料の円を描画
　- 文字表示用の関数を使って「燃料: xxx」と白色文字で表示


// 提出条件 //

・実行して正しく動作すること
・コメントの指示に沿って全ての処理を実装していること
・燃料が 0 になったら正しくゲームオーバーになること
・燃料残量がリアルタイムに更新されること
・描画が滑らかに行われていること

・ゲームプログラミングⅢ (GPⅢ) 用の Git Repository に追加し、
　Teams の「GPⅢテスト」チャンネルにURLを提出するか、
　ソリューションフォルダをそのまま提出してください。
*/


#include "DxLib.h"
#include <stdlib.h>
#include <time.h>
#include <math.h>

int WINAPI WinMain( HINSTANCE hInstance , HINSTANCE hr1evInstance , LPSTR lpCmdLine , int nCmdShow ){

	//-------------------- 『共通部分 A』--------------------//
	// 
	// !!GP3Test_00.cppで書いたものをここにコピーペーストしてください!!
	// 
	//-------------------- 『共通部分 A』--------------------//

	//C言語の記述で 乱数 を初期化してください。関数に (unsigned)time(NULL) を引数として渡します。


	//マウスの円の 位置 と、その 半径 30の変数を定義してください。初期位置は画面の中央にします。（int）


	//燃料の 位置 を定義し、その 半径 20の円の変数を定義してください。又、座標を画面上部のどこかのランダム位置で初期化してください（int）


	//燃料(fuel)の変数 を定義し、初期値を100にしてください。（int）


	while( 1 ){

		ClearDrawScreen();

		/*--- インプット処理 ---*/
		//DXライブラリの関数を使って、マウスの座標を定義しておいた変数に取得してください。


		//燃料の円を下に5ピクセルずつ移動させる。


		//if文で燃料が画面下に到達したことを検知し、if文の{}中で画面上部に移動し、横位置をウインドウの幅に収まるランダム位置に移動。


		//マウスの円の位置と燃料の円の位置との距離を求める（int）


		//if文でマウスの円と燃料の円のヒットを検知したら、if文の{}中で画面上部に移動し、横位置をウインドウの幅に収まるランダム位置に移動。
		//また、if文の{}中で燃料を+20する


		//燃料を毎フレームごとに-1して減少させる（int）


		//燃料を200を最大値とする上限処理を行う（int）


		//if文で燃料が0を下回ったら、while( 1 )のメインループを抜ける処理を行い、ゲームオーバーへ向かわせる


		/*--- 描画関数関連をここにまとめる ---*/
		//マウスの円を描画してください。
		//ヒット判定の後に描画することで、初期表示とヒット後の再描画の両方に対応できます。


		//燃料の円を描画してください。
		//ヒット判定の後に描画することで、初期表示とヒット後の再描画の両方に対応できます。


		//燃料残数を「燃料:」に続く白色の文字で画面に表示してください。


		ScreenFlip();
		WaitTimer( 33 );

		//-------------------- 『共通部分 B』--------------------//
		// 
		// !!GP3Test_00.cppで書いたものをここにコピーペーストしてください!!
		// 
		//-------------------- 『共通部分 B』--------------------//
	}

	DrawString( 400 , 300 , "GAME OVER" , GetColor( 255 , 0 , 0 ) );
	ScreenFlip();
	WaitKey();

	//-------------------- 『共通部分 C』--------------------//
	// DxLibの終了処理を行う命令を記述してください
	// 
	// !!GP3Test_00.cppで書いたものをここにコピーペーストしてください!!
	// 
	//-------------------- 『共通部分 C』--------------------//
	return 0;
}
